const mod=[{order:"0",route:"/dashboard"}];let history="/dashboard",routeParams={};function sendRequest(e){httpRequest("POST","/news",e).then(function(e){e=JSON.parse(e),$("#message").addClass(e.class),$("#message").text(e.message),cleanFields()}).catch(function(e){e=JSON.parse(e),$("#message").addClass(e.class),$("#message").text(e.message)})}function getBase64(e){return new Promise((t,n)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=(()=>t(a.result)),a.onerror=(e=>n(e))})}function updateLabel(){const e=$("#inputImagen")[0].files[0].name;$(".custom-file-label").text(e)}function getDate(){let e=new Date,t=e.getDate(),n=e.getMonth()+1;const a=e.getFullYear();return t<10&&(t="0"+t),n<10&&(n="0"+n),e=t+"/"+n+"/"+a}function replaceBreakLines(){return $("#inputContenido").val().replace(/(?:\r\n|\r|\n)/g,"<br>")}function cleanFields(){$("#inputImagen").val(""),$(".custom-file-label").text("Imagen"),$("#inputContenido").val(""),$("#inputTitulo").val("")}function markSelectedText(){var e=document.getElementById("inputContenido"),t=e.value.length,n=e.selectionStart,a=e.selectionEnd,s="<b>"+e.value.substring(n,a)+"</b>";e.value=e.value.substring(0,n)+s+e.value.substring(a,t)}function italicSelectedText(){var e=document.getElementById("inputContenido"),t=e.value.length,n=e.selectionStart,a=e.selectionEnd,s="<i>"+e.value.substring(n,a)+"</i>";e.value=e.value.substring(0,n)+s+e.value.substring(a,t)}httpRequest=function(e,t,n,a){return new Promise(function(s,o){var i=new XMLHttpRequest;a&&i.overrideMimeType(a),i.open(e,t),i.onload=function(){s(i.responseText)},i.onerror=function(){o(i.responseText)},n?(i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(n))):i.send()})},$("#news").submit(function(e){e.preventDefault(),e.stopPropagation(),$("#message").text("");e.currentTarget.id;if($("#inputImagen")[0].files[0])getBase64($("#inputImagen")[0].files[0]).then(e=>{sendRequest({fecha:getDate(),image:e,titulo:$("#inputTitulo").val(),contenido:replaceBreakLines()})});else{sendRequest({fecha:getDate(),image:"",titulo:$("#inputTitulo").val(),contenido:replaceBreakLines()})}}),redirect=function(e,t,n){let a=history;n&&-1!==n.indexOf("-")&&(n=(n=n.replace(/(?:^\w|[A-Z]|\b\w)/g,(e,t)=>0===t?e.toLowerCase():e.toUpperCase()).replace(/\s+/g,"")).replace(/-/g,""));for(let s in mod)mod[s].route===e&&(document.getElementById(mod[s].order).style.display="block",routeParams=t,history=e,window[n+"OnInit"]&&window[n+"OnInit"]()),mod[s].route===a&&a!==e&&(document.getElementById(mod[s].order).style.display="none")};