const mod=[{order:"0",route:"/dashboard"}];let history="/dashboard",routeParams={};function getBase64(e){return new Promise((t,n)=>{const o=new FileReader;o.readAsDataURL(e),o.onload=(()=>t(o.result)),o.onerror=(e=>n(e))})}function updateLabel(){const e=$("#inputImagen")[0].files[0].name;$(".custom-file-label").text(e)}function getDate(){let e=new Date,t=e.getDate(),n=e.getMonth()+1;const o=e.getFullYear();return t<10&&(t="0"+t),n<10&&(n="0"+n),e=t+"/"+n+"/"+o}function replaceBreakLines(){return $("#inputContenido").val().replace(/(?:\r\n|\r|\n)/g,"<br>")}function cleanFields(){$("#inputImagen").val(""),$(".custom-file-label").text(""),$("#inputContenido").val(""),$("#inputTitulo").val("")}httpRequest=function(e,t,n,o){return new Promise(function(a,s){var r=new XMLHttpRequest;o&&r.overrideMimeType(o),r.open(e,t),r.onload=function(){a(r.responseText)},r.onerror=function(){s(r.responseText)},n?(r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(n))):r.send()})},$("#news").submit(function(e){e.preventDefault(),e.stopPropagation(),$("#message").text("Imagen");e.currentTarget.id;getBase64($("#inputImagen")[0].files[0]).then(e=>{const t={fecha:getDate(),image:e,titulo:$("#inputTitulo").val(),contenido:replaceBreakLines()};httpRequest("POST","/news",t).then(function(e){e=JSON.parse(e),$("#message").addClass(e.class),$("#message").text(e.message),cleanFields()}).catch(function(e){e=JSON.parse(e),$("#message").addClass(e.class),$("#message").text(e.message)})})}),redirect=function(e,t,n){let o=history;n&&-1!==n.indexOf("-")&&(n=(n=n.replace(/(?:^\w|[A-Z]|\b\w)/g,(e,t)=>0===t?e.toLowerCase():e.toUpperCase()).replace(/\s+/g,"")).replace(/-/g,""));for(let a in mod)mod[a].route===e&&(document.getElementById(mod[a].order).style.display="block",routeParams=t,history=e,window[n+"OnInit"]&&window[n+"OnInit"]()),mod[a].route===o&&o!==e&&(document.getElementById(mod[a].order).style.display="none")};