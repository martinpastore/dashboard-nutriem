const mod=[{order:"0",route:"/dashboard"}];let history="/dashboard",routeParams={};function sendRequest(e){httpRequest("POST","/news",e).then(function(e){e=JSON.parse(e),$("#message").addClass(e.class),$("#message").text(e.message),cleanFields()}).catch(function(e){e=JSON.parse(e),$("#message").addClass(e.class),$("#message").text(e.message)})}function getBase64(e){return new Promise((t,n)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=(()=>t(s.result)),s.onerror=(e=>n(e))})}function updateLabel(){const e=$("#inputImagen")[0].files[0].name;$(".custom-file-label").text(e)}function getDate(){let e=new Date,t=e.getDate(),n=e.getMonth()+1;const s=e.getFullYear();return t<10&&(t="0"+t),n<10&&(n="0"+n),e=t+"/"+n+"/"+s}function replaceBreakLines(){return $("#inputContenido").val().replace(/(?:\r\n|\r|\n)/g,"<br>")}function cleanFields(){$("#inputImagen").val(""),$(".custom-file-label").text("Imagen"),$("#inputContenido").val(""),$("#inputTitulo").val("")}function markSelectedText(){var e=document.getElementById("inputContenido"),t=e.value.length,n=e.selectionStart,s=e.selectionEnd,a="<b>"+e.value.substring(n,s)+"</b>";e.value=e.value.substring(0,n)+a+e.value.substring(s,t)}function italicSelectedText(){var e=document.getElementById("inputContenido"),t=e.value.length,n=e.selectionStart,s=e.selectionEnd,a="<i>"+e.value.substring(n,s)+"</i>";e.value=e.value.substring(0,n)+a+e.value.substring(s,t)}function colorSelectedText(e){var t=document.getElementById("inputContenido"),n=t.value.length,s=t.selectionStart,a=t.selectionEnd,o=t.value.substring(s,a),i='<span style="color: '+document.getElementById("colorSelect").value+'">'+o+"</span>";t.value=t.value.substring(0,s)+i+t.value.substring(a,n)}httpRequest=function(e,t,n,s){return new Promise(function(a,o){var i=new XMLHttpRequest;s&&i.overrideMimeType(s),i.open(e,t),i.onload=function(){a(i.responseText)},i.onerror=function(){o(i.responseText)},n?(i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(n))):i.send()})},$("#news").submit(function(e){e.preventDefault(),e.stopPropagation(),$("#message").text("");e.currentTarget.id;if($("#inputImagen")[0].files[0])getBase64($("#inputImagen")[0].files[0]).then(e=>{sendRequest({fecha:getDate(),image:e,titulo:$("#inputTitulo").val(),contenido:replaceBreakLines()})});else{sendRequest({fecha:getDate(),image:"",titulo:$("#inputTitulo").val(),contenido:replaceBreakLines()})}}),redirect=function(e,t,n){let s=history;n&&-1!==n.indexOf("-")&&(n=(n=n.replace(/(?:^\w|[A-Z]|\b\w)/g,(e,t)=>0===t?e.toLowerCase():e.toUpperCase()).replace(/\s+/g,"")).replace(/-/g,""));for(let a in mod)mod[a].route===e&&(document.getElementById(mod[a].order).style.display="block",routeParams=t,history=e,window[n+"OnInit"]&&window[n+"OnInit"]()),mod[a].route===s&&s!==e&&(document.getElementById(mod[a].order).style.display="none")};